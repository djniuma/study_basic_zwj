<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.basic.mapper.LoginTicketMapper">

    <resultMap id="ticket" type="com.basic.dto.LoginTicketDTO" >
        <id column="id" property="id" jdbcType="VARCHAR" />
        <result column="user_id" property="userId" jdbcType="VARCHAR" />
        <result column="ticket" property="ticket" jdbcType="VARCHAR" />
        <result column="status" property="status" jdbcType="VARCHAR" />
        <result column="expired_date" property="expiredDate" jdbcType="DATE" />
    </resultMap>

    <sql id="table">login_ticket</sql>

    <sql id="basic_column">id, user_id, ticket, expired_date, status</sql>

    <insert id="addLoginTicketDTO">
        insert into
            <include refid="table"/>
            (<include refid="basic_column"/>)
        values (#{id}, #{userId}, #{ticket}, #{expiredDate}, #{status})
    </insert>

    <update id="updateLoginTicketDTO">
        update <include refid="table"/>
        set expired_date = #{expiredDate}, status = #{status}
        where id = #{id}
    </update>

    <select id="queryTicketByUserId" resultMap="ticket">
        select * from
            <include refid="table"/>
            where user_id = #{userId}
    </select>

    <select id="queryTicketByTicket" resultMap="ticket">
        select * from
        <include refid="table"/>
        where ticket = #{ticket}
    </select>


    <!--    <select id="queryTestContentById" resultType="java.lang.String">-->
<!--            select content from-->
<!--            <include refid="table"/>-->
<!--            where id = #{id}-->
<!--    </select>-->


</mapper>